!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.motio=e():t.motio=e()}(this,(function(){return function(t){var e={};function o(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,o),i.l=!0,i.exports}return o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=0)}([function(t,e,o){"use strict";!function(){const e={EVENT_MAP:{hover:"mouseover",click:"click"},animate:(t,o)=>{const n=document.querySelectorAll(t),i=Array.from(n);n.forEach((t,n)=>{t.motio={},t.motio.running=!1;let a=null;a=void 0===o?t.dataset.trigger:o.trigger,void 0!==a?(i.splice(n,1),t.addEventListener(e.EVENT_MAP[a],()=>{!1===t.motio.running&&(t.motio.running=!0,e.loadOpts(t,o),e.doAnim(t))})):(e.loadOpts(t,o),e.doAnim(t))})},loadOpts:(t,o)=>{e.isEmptyObj(o)?e.loadDataAttr(t):(o=e.initDefaults(o),Object.assign(t.motio,o)),t.motio.fontSize=parseFloat(window.getComputedStyle(t,null).getPropertyValue("font-size"))||24,t.motio.currentDelay=0},initDefaults:t=>(t.runSelected=void 0===t.split?e.animFull:e.animParts,t.split=t.split,t.delay=parseInt(t.delay)||0,t.clean=parseInt(t.clean)||0,t.retain=parseInt(t.retain)||0,t.duration=parseInt(t.duration)||1e3,t.iterationStart=parseFloat(t.iterationStart)||0,t.iterations=(-1===parseInt(t.iterations)?1/0:parseInt(t.iterations))||1,t.direction=t.direction||"normal",t.easing=t.easing||!1,t.animations=t.animations||!1,t),loadDataAttr:t=>{t.motio.runSelected=void 0===t.dataset.split?e.animFull:e.animParts,t.motio.split=t.dataset.split,t.motio.delay=parseInt(t.dataset.delay)||0,t.motio.clean=parseInt(t.dataset.clean)||0,t.motio.retain=t.dataset.retain||!1,t.motio.duration=parseInt(t.dataset.duration)||1e3,t.motio.iterationStart=parseFloat(t.dataset.iterationstart)||0,t.motio.iterations=-1===parseInt(t.dataset.iterations)?1/0:parseInt(t.dataset.iterations)||1,t.motio.direction=t.dataset.direction||"normal",t.motio.easing=t.dataset.easing||!1,t.motio.animations=t.dataset.animations||!1},props:t=>{const e={duration:t.motio.duration,fill:"forwards",delay:t.motio.currentDelay,iterationStart:t.motio.iterationStart,iterations:t.motio.iterations,direction:t.motio.direction};return t.motio.easing&&(e.easing=t.motio.easing),e},cleanUp:t=>{if(!1!==t.motio.retain){let e={};t.motio.retain.split(", ").forEach(o=>{const n=o.split(/\[(.*?)\]/),i=t.motio.animObj[n[0]][n[1]];e[n[0]]=i}),Object.assign(t.style,e)}let e="";Array.from(t.childNodes).forEach(o=>{if("A"===o.tagName){o.querySelectorAll("span").forEach(t=>{o.append(t.innerText),t.remove()}),0!==t.motio.retain&&Object.assign(o.style,t.motio.animObj),e+=o.outerHTML}else e+=0===o.innerText.length?" ":o.innerText,o.remove()}),t.innerText=e},animFull:t=>{t.motio.currentDelay=t.motio.currentDelay+t.motio.delay,t.animate(t.motio.animObj,e.props(t))},animParts:t=>{t.lastElementCb=(o,n)=>{o===n-1&&e.cleanUp(t)};const o=t.querySelector("a");let n;null!==o&&(t.textContent=t.textContent.replace(o.innerText,"*")),"chars"===t.motio.split?(n=t.textContent.split(""),t.textContent=""):n=t.querySelectorAll(t.motio.split);let i,a=1;void 0!==t.motio.animObj.opacity&&1==t.motio.animObj.opacity&&(a=0),n.forEach((r,l)=>{let s=!0;if("*"===r){let n=document.createElement("a");n.href=o.href,n.target=o.target,n.style.textDecoration="none";return o.innerText.split("").forEach(o=>{const l=document.createElement("span");l.innerText=o,l.style.display="inline-block",l.style.opacity=a," "===r&&(l.style.width=t.motio.fontSize/4+"px",s=!1),n.append(l),i=l.animate(t.motio.animObj,e.props(t)),t.motio.currentDelay=t.motio.currentDelay+t.motio.delay}),void t.append(n)}if(r instanceof HTMLElement)i=r.animate(t.motio.animObj,e.props(t)),1===t.motio.clean&&(i.onfinish=()=>{t.lastElementCb(l,n.length)});else{const o=document.createElement("span");o.innerText=r,o.style.display="inline-block",o.style.opacity=a," "===r&&(o.style.width=t.motio.fontSize/4+"px",s=!1),t.append(o),!0===s&&(i=o.animate(t.motio.animObj,e.props(t))),1===t.motio.clean&&(i.onfinish=()=>{t.lastElementCb(l,n.length)})}t.motio.currentDelay=t.motio.currentDelay+t.motio.delay})},isEmptyObj:t=>{for(let e in t)return!1;return!0},str2Obj:t=>t.split("|").map(t=>t.split(":").map(t=>t.trim())).reduce((t,o)=>(t[o[0]]=o[1].replace("[","").replace("]","").split(", ").map(t=>t.replace("randomColor",e.randomColor())),t),{}),randomColor:()=>"#xxxxxx".replace(/x/g,t=>(16*Math.random()|0).toString(16)),doAnim:t=>{let o={};!1!==t.motio.animations&&(o=!1==t.motio.animations instanceof Object?e.str2Obj(t.motio.animations):t.motio.animations),e.isEmptyObj(o)||(o=e.ensureExplicit(o,t),t.motio.animObj=o,t.motio.runSelected(t))},ensureExplicit:(t,e)=>{for(let[o,n]of Object.entries(t))if(1===n.length){let n=window.getComputedStyle(e,null).getPropertyValue(o);null!=n&&t[o].unshift(n)}return t}};t.exports=e}()}])}));